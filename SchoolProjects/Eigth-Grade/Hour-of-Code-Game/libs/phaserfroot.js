!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=111)}([function(e,t,n){var s=n(24),i="object"==typeof self&&self&&self.Object===Object&&self,r=s||i||Function("return this")();e.exports=r},function(e,t,n){var s=n(52),i=n(58);e.exports=function(e,t){var n=i(e,t);return s(n)?n:void 0}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var s=n(42),i=n(43),r=n(44),o=n(45),a=n(46);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=i,c.prototype.get=r,c.prototype.has=o,c.prototype.set=a,e.exports=c},function(e,t,n){var s=n(22);e.exports=function(e,t){for(var n=e.length;n--;)if(s(e[n][0],t))return n;return-1}},function(e,t,n){var s=n(12),i=n(54),r=n(55),o="[object Null]",a="[object Undefined]",c=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?a:o:c&&c in Object(e)?i(e):r(e)}},function(e,t,n){var s=n(1)(Object,"create");e.exports=s},function(e,t,n){var s=n(68);e.exports=function(e,t){var n=e.__data__;return s(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var s=n(26),i=n(27);e.exports=function(e,t,n,r){var o=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var h=t[a],l=r?r(n[h],e[h],h,n,e):void 0;void 0===l&&(l=e[h]),o?i(n,h,l):s(n,h,l)}return n}},function(module,__webpack_exports__,__webpack_require__){"use strict";const PluginManager={_plugins:{},_pluginsById:{},registerScript:function(script){const javascript=script.javascript;if("string"!=typeof javascript)return console.error("Script was not compiled:",script);let extractedName=javascript.match(/class ([^ ]+) extends/);if(!extractedName||!extractedName[1])return console.error("Could not extract script name:",script);extractedName=extractedName[1];try{eval(javascript)}catch(e){return console.error("Evaluation failure in script:",script),void console.error(e)}const plugin=this._plugins[extractedName];if(!plugin)return console.error("Script did not create a plugin!");this._pluginsById[script.id]=extractedName},register:function(e,t){this._plugins[e]&&console.warn("PluginManager: Overwriting existing plugin",e),this._plugins[e]=t},instantiate:function(e,t,n){"number"==typeof e&&(e=this._pluginsById[e]);const s=this._plugins[e];if(!s){console.error("PluginManager: Could not find plugin",e);const n=t&&t.scene;return void Phaserfroot.game.reportError("Could not find a plugin for a game object.\n\nPlugin key: "+e+"\nCurrent level: "+(n&&n.json&&n.json.name||"Unknown")+"\nObjects beneath this: "+(n&&n.children&&n.children.list&&n.children.list.length-1||"0/Unknown")+"\nX position: "+(t?t.posX:"Unknown")+"\nY position: "+(t?t.posY:"Unknown"))}const i=t.components;if(!i)return console.error("PluginManager: Could not add plugin to an object without a ComponentManager."),void Phaserfroot.game.reportError("Could not add plugin to an object.\n\nThe object was missing a component manager. Has a script been attached to a non-game object?\n\nPlugin key: "+e+"\nCurrent level: "+(scene&&scene.json&&scene.json.name||"Unknown")+"\nObjects beneath this: "+(scene&&scene.children&&scene.children.list&&scene.children.list.length-1||"0/Unknown")+"\nX position: "+(t&&t.x||"Unknown")+"\nY position: "+(t&&t.y||"Unknown"));const r=new s(t,n);i.add(r)}};__webpack_exports__.a=PluginManager},function(e,t,n){var s=n(1)(n(0),"Map");e.exports=s},function(e,t,n){var s=n(0).Symbol;e.exports=s},function(e,t,n){var s=n(28),i=n(82),r=n(32);e.exports=function(e){return r(e)?s(e):i(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var s=n(24),i=t&&!t.nodeType&&t,r=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===i&&s.process,a=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}).call(this,n(15)(e))},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var s=n(90),i=n(34),r=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),s(o(e),function(t){return r.call(e,t)}))}:i;e.exports=a},function(e,t,n){var s=n(94),i=n(11),r=n(95),o=n(96),a=n(97),c=n(6),h=n(25),l=h(s),u=h(i),p=h(r),d=h(o),f=h(a),g=c;(s&&"[object DataView]"!=g(new s(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||r&&"[object Promise]"!=g(r.resolve())||o&&"[object Set]"!=g(new o)||a&&"[object WeakMap]"!=g(new a))&&(g=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,s=n?h(n):"";if(s)switch(s){case l:return"[object DataView]";case u:return"[object Map]";case p:return"[object Promise]";case d:return"[object Set]";case f:return"[object WeakMap]"}return t}),e.exports=g},function(e,t,n){var s=n(100);e.exports=function(e){var t=new e.constructor(e.byteLength);return new s(t).set(new s(e)),t}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var s=n(6),i=n(2),r="[object AsyncFunction]",o="[object Function]",a="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=s(e);return t==o||t==a||t==r||t==c}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(53))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var s=n(27),i=n(22),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];r.call(e,t)&&i(o,n)&&(void 0!==n||t in e)||s(e,t,n)}},function(e,t,n){var s=n(73);e.exports=function(e,t,n){"__proto__"==t&&s?s(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var s=n(75),i=n(76),r=n(14),o=n(29),a=n(79),c=n(80),h=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=r(e),l=!n&&i(e),u=!n&&!l&&o(e),p=!n&&!l&&!u&&c(e),d=n||l||u||p,f=d?s(e.length,String):[],g=f.length;for(var m in e)!t&&!h.call(e,m)||d&&("length"==m||u&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||f.push(m);return f}},function(e,t,n){(function(e){var s=n(0),i=n(78),r=t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===r?s.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;e.exports=c}).call(this,n(15)(e))},function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var s=n(23),i=n(30);e.exports=function(e){return null!=e&&i(e.length)&&!s(e)}},function(e,t,n){var s=n(28),i=n(85),r=n(32);e.exports=function(e){return r(e)?s(e,!0):i(e)}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var s=n(36),i=n(37),r=n(19),o=n(34),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)s(t,r(e)),e=i(e);return t}:o;e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}},function(e,t,n){var s=n(31)(Object.getPrototypeOf,Object);e.exports=s},function(e,t,n){var s=n(36),i=n(14);e.exports=function(e,t,n){var r=t(e);return i(e)?r:s(r,n(e))}},function(e,t,n){var s=n(40),i=1,r=4;e.exports=function(e){return s(e,i|r)}},function(e,t,n){var s=n(41),i=n(72),r=n(26),o=n(74),a=n(84),c=n(87),h=n(88),l=n(89),u=n(91),p=n(92),d=n(93),f=n(20),g=n(98),m=n(99),y=n(105),v=n(14),_=n(29),x=n(107),b=n(2),w=n(109),C=n(13),E=1,j=2,S=4,P="[object Arguments]",k="[object Function]",T="[object GeneratorFunction]",I="[object Object]",A={};A[P]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[I]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[k]=A["[object WeakMap]"]=!1,e.exports=function e(t,n,O,M,L,F){var N,R=n&E,U=n&j,D=n&S;if(O&&(N=L?O(t,M,L,F):O(t)),void 0!==N)return N;if(!b(t))return t;var B=v(t);if(B){if(N=g(t),!R)return h(t,N)}else{var z=f(t),X=z==k||z==T;if(_(t))return c(t,R);if(z==I||z==P||X&&!L){if(N=U||X?{}:y(t),!R)return U?u(t,a(N,t)):l(t,o(N,t))}else{if(!A[z])return L?t:{};N=m(t,z,R)}}F||(F=new s);var G=F.get(t);if(G)return G;F.set(t,N),w(t)?t.forEach(function(s){N.add(e(s,n,O,s,t,F))}):x(t)&&t.forEach(function(s,i){N.set(i,e(s,n,O,i,t,F))});var Y=D?U?d:p:U?keysIn:C,V=B?void 0:Y(t);return i(V||t,function(s,i){V&&(s=t[i=s]),r(N,i,e(s,n,O,i,t,F))}),N}},function(e,t,n){var s=n(4),i=n(47),r=n(48),o=n(49),a=n(50),c=n(51);function h(e){var t=this.__data__=new s(e);this.size=t.size}h.prototype.clear=i,h.prototype.delete=r,h.prototype.get=o,h.prototype.has=a,h.prototype.set=c,e.exports=h},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var s=n(5),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=s(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var s=n(5);e.exports=function(e){var t=this.__data__,n=s(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var s=n(5);e.exports=function(e){return s(this.__data__,e)>-1}},function(e,t,n){var s=n(5);e.exports=function(e,t){var n=this.__data__,i=s(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var s=n(4);e.exports=function(){this.__data__=new s,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var s=n(4),i=n(11),r=n(59),o=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof s){var a=n.__data__;if(!i||a.length<o-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new r(a)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var s=n(23),i=n(56),r=n(2),o=n(25),a=/^\[object .+?Constructor\]$/,c=Function.prototype,h=Object.prototype,l=c.toString,u=h.hasOwnProperty,p=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!r(e)||i(e))&&(s(e)?p:a).test(o(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var s=n(12),i=Object.prototype,r=i.hasOwnProperty,o=i.toString,a=s?s.toStringTag:void 0;e.exports=function(e){var t=r.call(e,a),n=e[a];try{e[a]=void 0;var s=!0}catch(e){}var i=o.call(e);return s&&(t?e[a]=n:delete e[a]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var s,i=n(57),r=(s=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";e.exports=function(e){return!!r&&r in e}},function(e,t,n){var s=n(0)["__core-js_shared__"];e.exports=s},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var s=n(60),i=n(67),r=n(69),o=n(70),a=n(71);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=i,c.prototype.get=r,c.prototype.has=o,c.prototype.set=a,e.exports=c},function(e,t,n){var s=n(61),i=n(4),r=n(11);e.exports=function(){this.size=0,this.__data__={hash:new s,map:new(r||i),string:new s}}},function(e,t,n){var s=n(62),i=n(63),r=n(64),o=n(65),a=n(66);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=i,c.prototype.get=r,c.prototype.has=o,c.prototype.set=a,e.exports=c},function(e,t,n){var s=n(7);e.exports=function(){this.__data__=s?s(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var s=n(7),i="__lodash_hash_undefined__",r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(s){var n=t[e];return n===i?void 0:n}return r.call(t,e)?t[e]:void 0}},function(e,t,n){var s=n(7),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return s?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var s=n(7),i="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=s&&void 0===t?i:t,this}},function(e,t,n){var s=n(8);e.exports=function(e){var t=s(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var s=n(8);e.exports=function(e){return s(this,e).get(e)}},function(e,t,n){var s=n(8);e.exports=function(e){return s(this,e).has(e)}},function(e,t,n){var s=n(8);e.exports=function(e,t){var n=s(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t){e.exports=function(e,t){for(var n=-1,s=null==e?0:e.length;++n<s&&!1!==t(e[n],n,e););return e}},function(e,t,n){var s=n(1),i=function(){try{var e=s(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){var s=n(9),i=n(13);e.exports=function(e,t){return e&&s(t,i(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}},function(e,t,n){var s=n(77),i=n(3),r=Object.prototype,o=r.hasOwnProperty,a=r.propertyIsEnumerable,c=s(function(){return arguments}())?s:function(e){return i(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},function(e,t,n){var s=n(6),i=n(3),r="[object Arguments]";e.exports=function(e){return i(e)&&s(e)==r}},function(e,t){e.exports=function(){return!1}},function(e,t){var n=9007199254740991,s=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?n:t)&&("number"==i||"symbol"!=i&&s.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var s=n(81),i=n(16),r=n(17),o=r&&r.isTypedArray,a=o?i(o):s;e.exports=a},function(e,t,n){var s=n(6),i=n(30),r=n(3),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return r(e)&&i(e.length)&&!!o[s(e)]}},function(e,t,n){var s=n(18),i=n(83),r=Object.prototype.hasOwnProperty;e.exports=function(e){if(!s(e))return i(e);var t=[];for(var n in Object(e))r.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var s=n(31)(Object.keys,Object);e.exports=s},function(e,t,n){var s=n(9),i=n(33);e.exports=function(e,t){return e&&s(t,i(t),e)}},function(e,t,n){var s=n(2),i=n(18),r=n(86),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!s(e))return r(e);var t=i(e),n=[];for(var a in e)("constructor"!=a||!t&&o.call(e,a))&&n.push(a);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){(function(e){var s=n(0),i=t&&!t.nodeType&&t,r=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===i?s.Buffer:void 0,a=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,s=a?a(n):new e.constructor(n);return e.copy(s),s}}).call(this,n(15)(e))},function(e,t){e.exports=function(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}},function(e,t,n){var s=n(9),i=n(19);e.exports=function(e,t){return s(e,i(e),t)}},function(e,t){e.exports=function(e,t){for(var n=-1,s=null==e?0:e.length,i=0,r=[];++n<s;){var o=e[n];t(o,n,e)&&(r[i++]=o)}return r}},function(e,t,n){var s=n(9),i=n(35);e.exports=function(e,t){return s(e,i(e),t)}},function(e,t,n){var s=n(38),i=n(19),r=n(13);e.exports=function(e){return s(e,r,i)}},function(e,t,n){var s=n(38),i=n(35),r=n(33);e.exports=function(e){return s(e,r,i)}},function(e,t,n){var s=n(1)(n(0),"DataView");e.exports=s},function(e,t,n){var s=n(1)(n(0),"Promise");e.exports=s},function(e,t,n){var s=n(1)(n(0),"Set");e.exports=s},function(e,t,n){var s=n(1)(n(0),"WeakMap");e.exports=s},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,s=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(s.index=e.index,s.input=e.input),s}},function(e,t,n){var s=n(21),i=n(101),r=n(102),o=n(103),a=n(104),c="[object Boolean]",h="[object Date]",l="[object Map]",u="[object Number]",p="[object RegExp]",d="[object Set]",f="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",_="[object Float64Array]",x="[object Int8Array]",b="[object Int16Array]",w="[object Int32Array]",C="[object Uint8Array]",E="[object Uint8ClampedArray]",j="[object Uint16Array]",S="[object Uint32Array]";e.exports=function(e,t,n){var P=e.constructor;switch(t){case m:return s(e);case c:case h:return new P(+e);case y:return i(e,n);case v:case _:case x:case b:case w:case C:case E:case j:case S:return a(e,n);case l:return new P;case u:case f:return new P(e);case p:return r(e);case d:return new P;case g:return o(e)}}},function(e,t,n){var s=n(0).Uint8Array;e.exports=s},function(e,t,n){var s=n(21);e.exports=function(e,t){var n=t?s(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var s=n(12),i=s?s.prototype:void 0,r=i?i.valueOf:void 0;e.exports=function(e){return r?Object(r.call(e)):{}}},function(e,t,n){var s=n(21);e.exports=function(e,t){var n=t?s(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var s=n(106),i=n(37),r=n(18);e.exports=function(e){return"function"!=typeof e.constructor||r(e)?{}:s(i(e))}},function(e,t,n){var s=n(2),i=Object.create,r=function(){function e(){}return function(t){if(!s(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=r},function(e,t,n){var s=n(108),i=n(16),r=n(17),o=r&&r.isMap,a=o?i(o):s;e.exports=a},function(e,t,n){var s=n(20),i=n(3),r="[object Map]";e.exports=function(e){return i(e)&&s(e)==r}},function(e,t,n){var s=n(110),i=n(16),r=n(17),o=r&&r.isSet,a=o?i(o):s;e.exports=a},function(e,t,n){var s=n(20),i=n(3),r="[object Set]";e.exports=function(e){return i(e)&&s(e)==r}},function(e,t,n){"use strict";n.r(t);var s=class{constructor(e){e=e||{},this.active=!1!==e.active,this.name=e.name||"Untitled Component",this.owner=e.owner,e.preUpdate&&(this.preUpdate=e.preUpdate),e.update&&(this.update=e.update),e.postUpdate&&(this.postUpdate=e.postUpdate)}preUpdate(e,t){}update(e,t){}postUpdate(e,t){}};var i=class{constructor(e){this._components=[],this.owner=e}get components(){return this._components.slice()}get game(){return this.scene?this.scene.game:null}get scene(){return this.owner?this.owner instanceof Phaser.Scene?this.owner:this.owner.scene:null}add(e){this.addAt(e,this._components.length)}addAt(e,t){e.owner=this.owner,this._components.splice(t,0,e)}create(e){const t=new s(e=e||{});return this.add(t),t}getByName(e){const t=[];return this._components.forEach(n=>{n.name===e&&t.push(n)}),t}remove(e){const t=this._components.indexOf(e);this.removeAt(t)}removeAll(){for(let e=this._components.length-1;e>=0;e--)this.removeAt(e)}removeAt(e){const t=this._components[e];t&&(t.destroy&&t.destroy(),t.manager=null,t.owner=null,this._components.splice(e,1))}removeByName(e){let t=0;for(let n=this._components.length-1;n>=0;n--)this._components[n].name===e&&(this.removeAt(n),t++);return t}preUpdate(e,t){this._components.forEach(n=>{n.active&&n.preUpdate(e,t)})}update(e,t){this._components.forEach(n=>{n.active&&n.update(e,t)})}postUpdate(e,t){this._components.forEach(n=>{n.active&&n.postUpdate(e,t)})}};var r=class{constructor(){this._callbacks=[],this._properties=[]}clear(){this._callbacks=[],this._properties=[]}get(e){return this._properties[e]}has(e){return!!this.get(e)}set(e,t){this._properties[e]=t,this._executeCallbacks(e,t)}delete(e){delete this._properties[e],this._executeCallbacks(e,null)}_executeCallbacks(e,t){this._callbacks.forEach(n=>{n.name&&n.name!==e||n.callback.call(n.context,e,t)})}onUpdate(e,t,n){e?(n=n||null,this._callbacks.push({callback:e,context:t,name:n})):console.error("PropertySwitchboard: No callback was passed. Skipping.","#properties")}removeOnUpdate(e,t,n){n=n||null;for(let s=this._callbacks.length-1;s>=0;s--){let i=this._callbacks[s];if(i.callback===e&&i.context===t&&i.name===n)return this._callbacks.splice(s,1),!0}return!1}};var o=class{constructor(){this._tags=[]}add(e){this.has(e)||this._tags.push(e)}clear(){this._tags=[]}has(e){return this._tags.indexOf(e)>-1}remove(e){let t=this._tags.indexOf(e);t>-1&&this._tags.splice(t,1)}};var a={_EVENTS:{ANIMATION_STOP:"animationstop",COLLIDE:"collide",CREATE:"create",LEVEL_START:"levelStart",LEVEL_SWITCH:"levelSwitch",PRE_UPDATE:"preUpdate",UPDATE:"update",POST_UPDATE:"postUpdate"},_fDestroySafe:function(){this.exists&&(this.exists=!1,this.setPhysics&&this.setPhysics(!1),this.physicsLayer&&this.physicsLayer.remove(this),this.properties instanceof r&&this.properties.clear())},_fGetHitboxFromBody:function(){const e=this.body,t=this.getWorldTransformMatrix(this._hitboxMatrix),n=t.scaleX,s=t.scaleY,i=e.offset;return this._hitbox.setTo(t.tx+n*(i.x-this.displayOriginX),t.ty+s*(i.y-this.displayOriginY),e.sourceWidth*n,e.sourceHeight*s),this._hitbox},_fGetHitboxFromMyself:function(){return this._hitbox.setTo(this.posX,this.posY,this.width,this.height),this._hitbox},_fLevelStart:function(){this.emit(this.EVENTS.LEVEL_START)},_fLevelSwitch:function(e){this.emit(this.EVENTS.LEVEL_SWITCH)},_fSetupPluginComponents:function(e){if(!(e&&Array.isArray(e.dependencies)&&Array.isArray(e.scripts)))return console.error("Invalid scripts on instance",e);const t=this.scene.game.resourceStore;e.scripts.forEach(n=>{const s=t.getExternalResource(e,n.id);if(!s||!Array.isArray(s.variables))return console.error("Cannot find script",n,"on instance",e);const i={};s.variables.forEach(e=>{i[e.name]=e.varDefault}),n.variables.forEach(e=>{i[e.name]=e.value}),s.variables.forEach(n=>{if("Sound"===n.varType){const s=t.getExternalResource(e,i[n.name]);s&&(i[n.name]=s.id)}});try{Phaserfroot.PluginManager.instantiate(s.id,this,i)}catch(t){console.error("Syntax error on instance:",e,"script instance",n,"script",s,"error",t);const i=s?s.name:"untitled";this.scene.game.reportError("Syntax error in script ["+i+"].\n\nYou haven't done anything wrong. We must have made a mistake while putting the blocks together. You might be able to fix the problem by removing recently added blocks.\n\nThis is a Gamefroot bug - please let us know about it!")}})},_fSetPhysics:function(e){this.body.enable=e},_fUpdateBounds:new Function(Phaser.Physics.Arcade.Body.prototype.updateBounds.toString().replace(/function[\s]*\(\)[\s]*\{/,"").slice(0,-1)+";if(this.transform.scaleX<0){this.transform.x-=this.width}if(this.transform.scaleY<0){this.transform.y-=this.height}"),setAnchor:function(e){e._anchorX=0,e._anchorY=0,e._bearing=e.angle,Object.defineProperties(e,{anchorX:{enumerable:!0,get:function(){return this._anchorX},set:function(e){0===this.width?this.originX=0:this.originX=e/this.width,this.x+=e-this._anchorX,this._anchorX=e,this.updateDisplayOrigin()}},anchorY:{enumerable:!0,get:function(){return this._anchorY},set:function(e){0===this.height?this.originY=0:this.originY=e/this.height,this.y+=e-this._anchorY,this._anchorY=e,this.updateDisplayOrigin()}},bearing:{enumerable:!0,get:function(){return this._bearing},set:function(e){this._bearing=e,this.angle=e}},posX:{enumerable:!0,get:function(){return this.x-this._anchorX},set:function(e){this.x=e+this._anchorX}},posY:{enumerable:!0,get:function(){return this.y-this._anchorY},set:function(e){this.y=e+this._anchorY}}})},setCommonFeatures:function(e){e.exists=!0,e.EVENTS=this._EVENTS,e.colliders=[],e.isTilemap||this.setPhysics(e),this.setAnchor(e),this.setFunctions(e),this.setGetHitbox(e),this.setManagers(e)},setFunctions:function(e){e.destroySafe=this._fDestroySafe,e.onLevelStart=this._fLevelStart,e.onLevelSwitch=this._fLevelSwitch,e.isTilemap||(e.setPhysics=this._fSetPhysics),e.setupPluginComponents=this._fSetupPluginComponents},setGetHitbox:function(e){e._hitbox=new Phaser.Geom.Rectangle,e._hitboxMatrix=new Phaser.GameObjects.Components.TransformMatrix,e.body?e.getHitbox=this._fGetHitboxFromBody:e.getHitbox=this._fGetHitboxFromMyself},setManagers:function(e){this.setManagerComponents(e),this.setManagerProperties(e),this.setManagerTags(e)},setManagerComponents:function(e){e.components=new i(e)},setManagerProperties:function(e){e.properties=new r},setManagerTags:function(e){e.tags=new o},setPhysics:function(e){const t=e.scene;t.physics.world.enableBody(e,Phaser.Physics.Arcade.DYNAMIC_BODY),e.body.allowGravity=!1,e.physicsLayer=void 0,t.physicsLayersManager.addToLayer(e,0),e.body.updateBounds=this._fUpdateBounds}},c=n(39),h=n.n(c);const l=(e,t,n)=>(t-e)*n+e;var u=new Phaser.Class({Extends:Phaser.Cameras.Scene2D.Camera,initialize:function(e,t,n,s){Phaser.Cameras.Scene2D.Camera.call(this,e,t,n,s),this._offset=new Phaser.Math.Vector2(0,0),this._scale=new Phaser.Math.Vector2(1,1),this.tracking=!1,this._trackTarget=new Phaser.Math.Vector2(0,0),this._trackSpeed=.1;const i=Number.MAX_SAFE_INTEGER;this.setBounds(-i/2,-i/2,i,i)},bounds:{get:function(){return this._bounds}},offsetX:{get:function(){return this._offset.x},set:function(e){this._offset.x=e}},offsetY:{get:function(){return this._offset.y},set:function(e){this._offset.y=e}},posX:{get:function(){return this._scrollX},set:function(e){this._scrollX=this.clampX(e),this.dirty=!0}},posY:{get:function(){return this._scrollY},set:function(e){this._scrollY=this.clampY(e),this.dirty=!0}},scaleX:{get:function(){return this._scale.x},set:function(e){this._scale.x=e,this._zoom=Math.max(this._scale.x,this._scale.y),this.dirty=!0}},scaleY:{get:function(){return this._scale.y},set:function(e){this._scale.y=e,this._zoom=Math.max(this._scale.x,this._scale.y),this.dirty=!0}},trackSpeed:{get:function(){return 1e3*this._trackSpeed},set:function(e){this._trackSpeed=e/1e3}},zoom:{get:function(){return this._zoom},set:function(e){this._scale.x=e,this._scale.y=e,this._zoom=e,this.dirty=!0}},_calculateTrack:function(e){const t=this._trackTarget,n=this.posX,s=this.posY,i=t.x,r=t.y,o=i-n,a=r-s,c=Math.atan2(a,o),h=e*this._trackSpeed;Math.hypot(o,a)<=h?(this.posX=i,this.posY=r,this.tracking=!1):(this.posX+=h*Math.cos(c),this.posY+=h*Math.sin(c))},postUpdate:function(e,t){this.tracking&&this._calculateTrack(t)},preRender:function(e){var t=this.width,n=this.height,s=.5*t,i=.5*n,r=this._scale.x*e,o=this._scale.y*e,a=this.matrix,c=t*this.originX,h=n*this.originY,u=this._follow,p=this.deadzone,d=this.scrollX,f=this.scrollY;if(p&&((e,t,n)=>(e.x=t-e.width/2,e.y=n-e.height/2,e))(p,this.midPoint.x,this.midPoint.y),u){var g=u.x-this.followOffset.x,m=u.y-this.followOffset.y;p?(g<p.x?d=l(d,d-(p.x-g),this.lerp.x):g>p.right&&(d=l(d,d+(g-p.right),this.lerp.x)),m<p.y?f=l(f,f-(p.y-m),this.lerp.y):m>p.bottom&&(f=l(f,f+(m-p.bottom),this.lerp.y))):(d=l(d,g-c,this.lerp.x),f=l(f,m-h,this.lerp.y))}this.useBounds&&(d=this.clampX(d),f=this.clampY(f)),this.roundPixels&&(c=Math.round(c),h=Math.round(h)),this.scrollX=d,this.scrollY=f;var y=d+s,v=f+i;this.midPoint.set(y,v);var _=t/r,x=n/o;this.worldView.setTo(y-_/2,v-x/2,_,x),a.applyITRS(this.x+c,this.y+h,this.rotation,r,o),a.translate(-c-this._offset.x,-h-this._offset.y),this.shakeEffect.preRender()},trackTo:function(e,t){this.tracking=!0,this._trackTarget.setTo(e,t),this.stopFollow()}});var p={Resource:"Resource",Script:"Script",Dependent:"Dependent",Immutable:"Immutable",ImageFile:"ImageFile",AudioFile:"AudioFile",FontFile:"FontFile",Correlator:"Correlator",FolderLabel:"FolderLabel",FontFace:"FontFace",Game:"Game",Level:"Level",Layer:"Layer",InstanceLayer:"InstanceLayer",TileLayer:"TileLayer",Tile:"Tile",TileSingle:"TileSingle",MagicTile16:"MagicTile16",MagicTile47:"MagicTile47",Instance:"Instance",SpriteInstance:"SpriteInstance",TextInstance:"TextInstance",Sprite:"Sprite",ScriptedSprite:"ScriptedSprite",Sequence:"Sequence",Frame:"Frame"};var d=new Phaser.Class({Extends:Phaser.Physics.Arcade.Sprite,initialize:function(e,t){const n=e.game.resourceStore.getExternalResource(t,t.sprite)||{sequences:[]},s=n.sequences.map(t=>e.game.resourceStore.getExternalResource(n,t))||[];this.animIds={},s.forEach(t=>{const n=e.getAnim(t);this.animIds[t.name]=n.key});let i=0,r=0;const o=s.find(e=>"idle"===e.name)||s[0];if(!o){console.error("Game object has no animations:",t);const n="Game object has no animations.\n\nSuggestion: locate and remove this object.\n\nCurrent level: "+(e&&e.json&&e.json.name||"Unknown")+"\nObjects beneath this: "+(e&&e.children&&e.children.list&&e.children.list.length||"0/Unknown")+"\nObject type: Game object (graphics)\nX position: "+t.position.x+"\nY position: "+t.position.y;return void Phaserfroot.game.reportError(n)}{const t=e.anims.get(o.id);i=t.textureKey,r=t.textureFrame}Phaser.Physics.Arcade.Sprite.call(this,e,t.position.x,t.position.y,i,r),this.wasBlocked={none:!0,left:!1,right:!1,up:!1,down:!1},this.playStarting=0,this.setData("id",Phaserfroot.getUniqueId(t.id)),this.setData("animKeyPrefix",this.getAnimPrefix(t)),this.setData("animKeyCurrent","idle"),this.play(o.id),a.setCommonFeatures(this);const c=(e.game.resourceStore.getExternalResource(o,o.frames[0])||{hitboxes:[{position:{x:0,y:0},size:{x:1,y:1}}]}).hitboxes[0];this.body.setSize(c.size.x,c.size.y),this.body.setOffset(c.position.x,c.position.y),this.name=t.name,this.rotation=isNaN(t.rotation)?0:t.rotation,this.scaleX=isNaN(t.scale.x)?1:t.scale.x,this.scaleY=isNaN(t.scale.y)?1:t.scale.y,this.anchorX=isNaN(t.anchor.x)?0:t.anchor.x,this.anchorY=isNaN(t.anchor.y)?0:t.anchor.y,e.sys.displayList.add(this),e.sys.updateList.add(this),this.setupPluginComponents(t),this.emit(this.EVENTS.CREATE)},getAnimPrefix:function(e){return(e.name?e.name:e.id)+"-"},playFrameNext:function(){this.playFrameRelative(1)},playFramePrevious:function(){this.playFrameRelative(-1)},playFrameRelative:function(e){e=Math.round(e);const t=this.anims.currentAnim;if(t.paused)return;const n=Phaser.Math.Wrap(this.playingIndex()+e,0,t.frames.length);this.anims.setCurrentFrame(t.getFrameAt(n))},playing:function(){return this.getData("animKeyCurrent")},playingIndex:function(){const e=this.anims.currentFrame,t=this.anims.currentAnim.frames;return e&&t?t.indexOf(e):-1},playMy:function(e){this.playStarting++;const t=this.playing(),n=this.getData("animKeyPrefix");if(n){const s=this.animIds[e];t!==e&&(this.emit(this.EVENTS.ANIMATION_STOP),this.emit(this.EVENTS.ANIMATION_STOP+"-"+n+t),this.setData("animKeyCurrent",e),this.play(s))}return this.playStarting--,this},playStop:function(){this.anims.pause(),this.emit(this.EVENTS.ANIMATION_STOP),this.emit(this.EVENTS.ANIMATION_STOP+"-"+this.anims.currentAnim.key)},setAnimationListener:function(e,t,n,s,i){const r=e+"-"+this.animIds[t];i?this.off(r,n,s||this):this.on(r,n,s||this)}});var f=class{constructor(e,t){this.instances=[],this.pool=[],this.scene=e,this.template=t}create(){const e=new d(this.scene,this.template);return this.instances.push(e),e}drain(){const e=Math.round((this.pool.length-128)/32);for(let t=0;t<e;t++)this.pool.pop().destroy()}get(){return this.pool.length?this.reinstantiate():this.create()}kill(e){e.visible=!1,e.components.removeAll();const t=this.instances.indexOf(e);t>-1?(this.instances.splice(t,1),this.pool.push(e)):console.warn("Instance is not ready, cannot send to pool:",e)}reinstantiate(){const e=this.pool.pop();this.instances.push(e),e.active=!0,e.alpha=1,e.exists=!0,e.visible=!0,e.posX=this.template.position.x,e.posY=this.template.position.y,e.bearing=this.template.rotation,e.scaleX=this.template.scale.x,e.scaleY=this.template.scale.y,e.anchorX=this.template.anchor.x,e.anchorY=this.template.anchor.y,e.playMy&&e.playMy("idle"),e.setPhysics&&(e.setPhysics(!0),e.body.reset(e.x,e.y)),this.scene.physicsLayersManager.addToLayer(e,0),e.setupPluginComponents(this.template);const t=this.scene.getChildren();return this.scene.addChildAfter(e,t[t.length-1]),e}};var g=new Phaser.Class({Extends:Phaser.Events.EventEmitter,initialize:function(e){Phaser.Events.EventEmitter.call(this),this._key=e,this.isDown=!1,e.setEmitOnRepeat(!0),e.on(this.EVENTS.DOWN,this._onDown,this),e.on(this.EVENTS.UP,this._onUp,this)},EVENTS:{DOWN:"down",HOLD:"hold",UP:"up"},_onDown:function(){this.isDown||this.emit(this.EVENTS.DOWN),this.isDown=!0,this.emit(this.EVENTS.HOLD)},_onUp:function(){this.isDown=!1,this.emit(this.EVENTS.UP)},destroy:function(){this._key.off("down",this._onDown,this),this._key.off("up",this._onDown,this)}});var m=class{constructor(e){this.childrenRemovable=[],this._collideInternally=!0,this.dirty=!1,this.layerColliders=[],this.scene=e,this.group=e.add.group()}_fCollideCallback(e,t){e.EVENTS&&e.EVENTS.COLLIDE&&e.emit(e.EVENTS.COLLIDE,t),t.EVENTS&&t.EVENTS.COLLIDE&&t.emit(t.EVENTS.COLLIDE,e)}_fProcessCallback(e,t){if(e instanceof Phaser.Tilemaps.Tile){if(t.body&&t.body.immovable)return!1}else if(t instanceof Phaser.Tilemaps.Tile&&e.body&&e.body.immovable)return!1;return!0}add(e){e.physicsLayer!==this&&(e.physicsLayer&&e.physicsLayer.remove(e),this.group.add(e),e.physicsLayer=this,this._collideInternally&&this.makeCollide(e))}destroyChildColliders(e){this.getColliders(e).forEach(e=>{e.destroy()}),e.colliders=[]}getCollider(e,t){for(let n of e.colliders)if(n.object1===t||n.object2===t)return n}getColliders(e){return e.colliders}hasChild(e){return this.group.contains(e)}makeCollide(e){if(!e.exists)return;const t=this.scene.physics.add.collider(e,this.group,null,this._fProcessCallback);e.colliders.push(t),t.collideCallback=this._fCollideCallback}remove(e){this.hasChild(e)&&(e.physicsLayer=null,this.childrenRemovable.push(e),this.destroyChildColliders(e),this.dirty=!0)}removeAll(){this.group.children.iterate(e=>{this.remove(e)})}setExternalCollision(e,t){const n=this.scene.physicsLayersManager.layers[e];if(!n||n===this)return;const s=this.layerColliders,i=s.length;if(t){for(let e=0;e<i;e++){const t=s[e];if(t.object1===this||t.object2===this)return}const e=this.scene.physics.add.collider(this.group,n.group);e.collideCallback=this._fCollideCallback,s.push(e),n.layerColliders.push(e)}else{let e;for(let t=0;t<i;t++){const i=s[t],r=this.group,o=n.group;if(i.object1===r&&i.object2===o){e=i;break}if(i.object2===o&&i.object1===r){e=i;break}}e&&(e.destroy(),s.splice(s.indexOf(e),1),n.layerColliders.splice(n.layerColliders.indexOf(e),1))}}setInternalCollisions(e){const t=this.group.children.getArray();if(e){if(this._collideInternally)return;this._collideInternally=!0,t.forEach(e=>{this.makeCollide(e)})}else{if(!this._collideInternally)return;this._collideInternally=!1,t.forEach(e=>{this.destroyChildColliders(e)})}}tidy(){this.dirty&&(this.group.children.each(e=>{e.exists&&-1===this.childrenRemovable.indexOf(e)||this.group.children.delete(e)}),this.childrenRemovable.length=0,this.dirty=!1)}};var y=class{constructor(e){this.scene=e,this.layers=[]}addToLayer(e,t){this.layers[t]||(this.layers[t]=new m(this.scene)),this.layers[t].add(e)}getLayersWithChild(e){return this.layers.filter(t=>t.hasChild(e))}removeLayer(e){const t=this.layers[e];t&&(t.removeAll(),this.layers.splice(e,1))}};var v=class extends s{constructor(e){(e=e||{}).name="SoundManager",super(e),this._effects=[],this._music=null,this.muteEffects=!1,this.muteMusic=!1,this._volume=1,this.active=!1}get volume(){return this._volume}set volume(e){isNaN(e)?console.error("Volume was not a number!"):(e=Math.max(0,e),this._volume=e,this.owner.sound.setVolume(this._volume))}playEffect(e){if(!e||!this.owner.game.cache.audio.get(e))return;const t=this.owner.sound.add(e,{mute:this.muteEffects});t&&(this._effects.push(t),t.once("complete",()=>{this.stopEffect(t)}),t.play())}playMusic(e){this.stopMusic(),e&&this.owner.game.cache.audio.get(e)&&(this._music=this.owner.sound.add(e,{loop:!0,mute:this.muteMusic}),this._music&&this._music.play())}setMuteEffects(e){this.muteEffects=!!e,this._effects.forEach(e=>{e.mute=this.muteEffects})}setMuteMusic(e){this._music&&(this._music.mute=!!e),this.muteMusic=!!e}setPauseMusic(e){this._music&&(e?this._music.pause():this._music.resume())}stopAll(){this.stopMusic(),this._effects.slice().forEach(e=>{this.stopEffect(e)})}stopEffect(e){e.destroy();let t=this._effects.indexOf(e);t>-1&&this._effects.splice(t,1)}stopMusic(){this._music&&(this._music.stop(),this._music.destroy(),this._music=null)}};var _=class extends s{constructor(){super({name:"TextAutomation"}),this._completedAll=!0,this._completedChunk=!0,this._continueKeycodes=[],this._enablePages=!1,this._enableRate=!1,this._owner=null,this._text="",this._textChunks=[],this._textChunksIndex=0,this._textCurrent="",this.typewriterInterval=10,this._typewriterSteps=0,this._typewriterTicks=0}get continueKeycodes(){return this._continueKeycodes.slice()}set enablePages(e){e=!!e,this._enablePages!==e&&(this._enablePages=e,this.assignChunks())}get enablePages(){return this._enablePages}set enableRate(e){this._enableRate=!!e}get enableRate(){return this._enableRate}set owner(e){if(this._owner===e)return;const t=Phaser.GameObjects.Events.DESTROY;this._owner&&this._owner.off(t,this.destroy,this),this._owner=e,this._owner&&this._owner.once(t,this.destroy,this)}get owner(){return this._owner}set text(e){this._text=e,this.assignChunks(),this._startPage()}get text(){return this._textCurrent}assignChunks(){this._completedAll=!1,this._completedChunk=!1,this._textChunksIndex=0,this._typewriterSteps=0,this._typewriterTicks=0,this._enablePages?this._textChunks=this._text.split("[CONTINUE]"):this._textChunks[0]=this._text}_startPage(){this._started||(this._started=!0,this._enableRate?this._textCurrent="":this._textCurrent=this._textChunks[this._textChunksIndex],this.owner.text=this._textCurrent,this.owner.scene.events.emit("TextAutomationStartPage",this.owner))}completeChunk(){this._completedChunk=!0,this.owner.scene.events.emit("TextAutomationCompletePage",this.owner),this._textChunksIndex===this._textChunks.length-1&&(this._completedAll=!0,this.owner.scene.events.emit("TextAutomationCompleteAll",this.owner))}destroy(){this._continueKeycodes.forEach(e=>{this.setContinueKey(e,!1)})}preUpdate(e,t){if(this._completedAll||this._completedChunk)return;const n=this._textChunks[this._textChunksIndex];this._enableRate?(this._typewriterTicks+=t,this._textCurrent=this.typewrite(n),this._textCurrent.length===n.length&&this.completeChunk()):(this._textCurrent=n,this.completeChunk()),this.owner.text=this._textCurrent,this._started=!1}setContinueKey(e,t){const n=this._continueKeycodes.indexOf(e);if(t){if(n>-1)return}else if(-1===n)return;this._continueKeycodes.push(e),this.owner.scene.getKey(e)[t?"on":"off"]("up",this.showNextPage,this)}showNextPage(){if(this._completedChunk){if(this._textChunksIndex===this._textChunks.length-1)return;this._completedChunk=!1,this._textChunksIndex++,this._typewriterSteps=0,this._typewriterTicks=0,this._startPage()}else this._typewriterSteps=this._textChunks[this._textChunksIndex].length,this.owner.scene.events.emit("TextAutomationFastForward",this.owner)}typewrite(e){const t=Math.floor(this._typewriterTicks/this.typewriterInterval);return this._typewriterTicks-=t*this.typewriterInterval,this._typewriterSteps+=t,e.slice(0,this._typewriterSteps)}};var x=new Phaser.Class({Extends:Phaser.Scene,initialize:function(e){this.json=e.json,Phaser.Scene.call(this,{key:e.key})},create:function(){this.time.now=this.game.loop.time,this._keys={},this.setupKeyboard(),this.created=!1,this._createSystems(),this.setupCamera(),this.setDebug(this.game.debug),this.populateLevel(),this.created=!0,this.getChildren().forEach(e=>{e.onLevelStart&&e.onLevelStart()}),this._setupUpdateComponents(),this.events.once("shutdown",this._shutdown,this)},_createSystems:function(){this.components||(this.components=new i(this)),this.components.add(new v),this.physicsLayersManager=new y(this)},_setupUpdateComponents:function(){this.events.on("postupdate",this._updateComponents,this),this.components.create({name:"Child Component Manager",preUpdate:(e,t)=>{this.getChildren().forEach(n=>{n.components&&n.components.preUpdate(e,t)})},update:(e,t)=>{this.getChildren().forEach(n=>{n.components&&n.components.update(e,t)})},postUpdate:(e,t)=>{const n=this.getChildren();if(n.forEach(n=>{n.components&&n.components.postUpdate(e,t)}),!this.scene.settings.active)return;n.forEach(e=>{const t=e.wasBlocked;if(t){const n=e.body.blocked;t.left=n.left,t.right=n.right,t.up=n.up,t.down=n.down,t.none=n.none}}),this.children.getChildren().filter(e=>e.active&&!1===e.exists).forEach(e=>{e.active=!1;const t=this.classes[e.name];t?t.kill(e):e.destroy()});for(let e in this.classes)this.classes[e].drain();this.physicsLayersManager.layers.forEach(e=>{e.tidy()});const s=this.physics.world.colliders;s.getActive().forEach(e=>{e.active&&!1!==e.object1.exists&&!1!==e.object2.exists||s.remove(e)})}})},_shutdown:function(){for(var e in this._keys)this._keys[e].destroy&&this._keys[e].destroy(),delete this._keys[e];const t=this.components.getByName("SoundManager");t&&t.length>0&&t[0].stopAll(),this.components.removeAll(),this.events.off("postupdate",this._updateComponents,this)},_updateComponents:function(e,t){this.components.preUpdate(e,t),this.components.update(e,t),this.components.postUpdate(e,t)},update:function(e,t){this.data.set("delta",t)},populateLevel:function(){if(!this.json||this.json.type!==p.Level){console.error("Level.populateLevel() error: could not find level data.");let e="Could not find level data.\n\nA level file may have failed to load. Please check your network connection and try again.\nCurrent level: ";return this.json?e+=this.json&&this.json.name||"Unknown (data unavailable)":e+="Unknown (data unavailable)",e+="\nTry using the level number: "+this.scene.key,void this.game.reportError(e)}const e=this.json.colorRGB;this.cameras.main.setBackgroundColor({r:e.r,g:e.g,b:e.b,a:e.a}),this.classes={},this.json.layers.map(e=>this.game.resourceStore.getExternalResource(this.json,e)).forEach(e=>{switch(e.type){case p.InstanceLayer:this.addInstanceLayer(e);break;case p.TileLayer:this.addTilemap(e);break;default:console.error("Skipped invalid layer:",e)}})},setupCamera:function(){const e=this.cameras.main,t=new u(0,0,this.game.config.width,this.game.config.height);t.setScene(this),t.setRoundPixels(!0),this.cameras.addExisting(t,!0),this.cameras.remove(e),this.components.addAt(new s({name:"Camera Manager",postUpdate:(e,n)=>{t.postUpdate(e,n)}}),0)},setupKeyboard:function(){this.input.keyboard.on("keydown",e=>{e&&e.keyCode&&(this._keys.lastPressed=e.keyCode)}),this.input.keyboard.on("keyup",e=>{e&&e.keyCode&&this._keys.lastPressed===e.keyCode&&delete this._keys.lastPressed})},_getInstanceNameSafe:function(e){return(e.name?e.name+"-":"")+e.id},addChildAfter:function(e,t){this.addChildRelativeTo(e,t,1)},addChildBefore:function(e,t){this.addChildRelativeTo(e,t,0)},addChildRelativeTo:function(e,t,n){if(!e||!t||e===t)return;const s=this.sys.displayList;s.remove(e,!0);const i=s.getIndex(t);s.addAt(e,i+n,!0)},addInstanceClass:function(e){const t=h()(e);t.name=this._getInstanceNameSafe(e),this.classes[t.name]=new f(this,t)},addInstanceLayer:function(e){let t=e.members.map(t=>this.game.resourceStore.getExternalResource(e,t));t.forEach((t,n)=>{(!t||t.type!==p.SpriteInstance&&t.type!==p.TextInstance)&&console.error("Could not find instance at index",n,"on layer",e)}),(t=t.filter(e=>e&&(e.type===p.SpriteInstance||e.type===p.TextInstance))).filter(e=>e.type===p.SpriteInstance).forEach(e=>{this.addInstanceClass(e)}),t.forEach(e=>{switch(e.type){case p.SpriteInstance:this.addSpriteByName(this._getInstanceNameSafe(e));break;case p.TextInstance:this.addText(e);break;default:console.error("Could not instantiate TextInstance",e)}})},addSpriteByName:function(e){const t=this.classes[e];return t?t.get():null},addText:function(e){isNaN(e.x)||(e={align:"left",anchor:{x:0,y:0},color:"#000000",fontFamily:"sans-serif",fontSize:32,lineHeight:1,lineWidth:1/0,name:"",position:{x:e.x,y:e.y},rotation:0,scale:{x:1,y:1},text:e.textText,dependencies:[],scripts:[]});const t=this.add.text(e.position.x,e.position.y,e.text,{fontFamily:e.fontFamily,fontSize:e.fontSize,color:e.color.replace(/^0x/,"#"),align:e.align,wordWrap:{width:e.lineWidth}});let n=e.anchor.x,s=e.anchor.y;return"center"===e.align?n+=.5:"right"===e.align&&(n+=1),t.setOrigin(n,s),a.setCommonFeatures(t),t.anchorX=t.displayOriginX,t.anchorY=t.displayOriginY,"center"===e.align?t.posX-=.5*t.width:"right"===e.align&&(t.posX-=t.width),t.name=e.name,t.rotation=e.rotation,t.scaleX=e.scale.x,t.scaleY=e.scale.y,t.setLineSpacing(e.lineHeight),t.setPhysics(!1),t.components.add(new _),t.setupPluginComponents(e),t.emit(t.EVENTS.CREATE),t},addTilemap:function(e){const t=[];for(let n=0,s=e.gridSize.y;n<s;n++){const s=[];t.push(s);const i=n*e.gridSize.x;for(let t=0,n=e.gridSize.x;t<n;t++){const n=e.tiles[t+i];void 0===n&&(n=0),s.push(n-1)}}const n=this.make.tilemap({data:t,tileWidth:e.tileSize.x,tileHeight:e.tileSize.y,width:e.gridSize.x,height:e.gridSize.y}),s=n.addTilesetImage(e.id+"-tile-spritesheet",void 0,e.tileSize.x,e.tileSize.y,1,2,-1),i=n.createStaticLayer(0,s);return a.setCommonFeatures(i),e.collides&&(i.collides=!0,this.physicsLayersManager.addToLayer(i,0),n.setCollisionByExclusion([-1],!0)),i},broadcast:function(e,t){this.messageExternal(e,t),this.messageChildren(e,t)},getAllChildrenByName:function(e){return this.classes[e]?this.instanceClass.instances:[]},getAnim:function(e){let t=this.anims.get(e.id);if(t)return t;const n=e.frames.map(t=>{const n=this.game.resourceStore.getExternalResource(e,t);if(!n)return console.error("Could not find frame",t,"on",e);const s=this.game.resourceStore.getExternalResource(n,n.imageId).id;return s?{key:s,frame:0}:console.error("Could not find texture",n.imageId,"on",n)});return this.anims.create({key:e.id+"",frames:n,repeat:e.repeat,frameRate:e.frameRate})},getChildById:function(e,t){const n=this.getChildren();for(let t=0;t<n.length;t++){const s=n[t];if(s.getData("id")===e)return s}},getChildByName:function(e){const t=this.classes[e];if(t){if(t.instances.length)return this.classes[e].instances[0]}return null},getChildren:function(){return this.children.getChildren().filter(e=>e.exists)},getChildrenByTag:function(e){if(!this.created)return[];return this.getChildren().filter(t=>t.tags&&t.tags.has(e))},getKey:function(e){if(this._keys[e])return this._keys[e];const t=this.input.keyboard.addKey(e),n=new g(t);return this._keys[e]=n,n},getLastChildByName:function(e){const t=this.classes[e];if(t){const e=t.instances;if(e.length)return e[e.length-1]}return null},getRandomChildByName:function(e){const t=this.getAllChildrenByName(e);return 0===t.length?null:Phaser.Math.RND.pick(t)},messageExternal:function(e,t){this.game.broadcast.emitter.emit(this.game.broadcast.MESSAGE,e,t)},messageChildren:function(e,t){this.getChildren().forEach(n=>{this.messageInstance(n,e,t)})},messageInstance:function(e,t,n){e&&e.properties&&e.properties.set&&(arguments.length>2&&e.properties.set("_messaging-value_",n),e.properties.set("_messaging_",t))},onSwitch:function(e){this.getChildren().forEach(t=>{t.onLevelSwitch&&t.onLevelSwitch(e)})},setDebug:function(e){const t=this.physics.world;e?t.debugGraphic?t.debugGraphic.visible=!0:(t.createDebugGraphic(),t.debugGraphic.setData(Phaserfroot.tags.UI,!0)):t.debugGraphic&&(t.debugGraphic.visible=!1)},swapChildren:function(e,t){const n=this.sys.displayList,s=n.getIndex(e),i=n.getIndex(t);s<0||i<0||(n.list[s]=t,n.list[i]=e)}});var b=new class{constructor(){this.activeLevel=null,this.game=null,this.levels=[],this.switching=!1}add(e,t){const n="level-"+t,s=new x({key:n,json:e});this.game.scene.add(n,s,!1),this.levels.push(s)}getCurrent(){return this.game.scene.getScene(this.activeLevel)}getLevel(e){return"number"==typeof e&&(e="level-"+e),this.game.scene.getScene(e)}switchTo(e){if(this.switching)return;this.switching=!0,"number"==typeof e&&(e="level-"+e);const t=this.getCurrent();t?t.events.once("postupdate",()=>{this._switchLevel(e)}):this._switchLevel(e)}_switchLevel(e){const t=this.getCurrent();t&&t.onSwitch(e),this.switching=!1;const n=this.activeLevel||this.game.scene.scenes[0];try{this.game.scene.stop(n),this.activeLevel=e,this.game.scene.start(e)}catch(t){console.error("LevelManager.switchTo() error","target",e,t);const n="Could not switch to a new level.\n\nPlease try to load this game again. If this does not work, check your level and scripts. Ensure that they are free of errors and are not named with special characters.\n\nTarget level number: "+e;this.game.reportError(n)}}};var w=class{constructor(e){this.buffer=[],this.BUFFER_MAX=10,this.debug=!1,this.diagnosticText=null,this.game=e,this.overlay=null,this.text=null}addDebug(){this.overlay?this.overlay.scene.isActive()||this.overlay.scene.start():(this.overlay=this.game.scene.add("log-buffer-overlay",{}),this.overlay.events.on("ready",this.addText,this),this.overlay.scene.start())}addText(){const e=this.game.config.width,t=this.game.config.height;this.background=this.overlay.add.rectangle(e/2,t/2,e,t,13373713,.3),this.text=this.overlay.add.text(0,20,"",{align:"right"}),this.renderText(),this.diagnosticText=this.overlay.add.text(10,20,"",{align:"left"}),this.overlay.update=((e,t)=>{let n=[];const s=this.game.levelManager.getCurrent();s&&(n=s.getChildren());const i="Level Members: "+Math.max(n.length-1,0)+"\nFrames per Second: "+(1e3/t).toFixed(0);this.diagnosticText.setText(i)})}log(e,t){for(t?console.log(t,e):console.log("#Script",e),this.buffer.push(e);this.buffer.length>this.BUFFER_MAX;)this.buffer.shift();this.overlay&&this.overlay.scene.isActive()&&this.renderText()}removeDebug(){this.overlay&&this.overlay.scene.isActive()&&this.overlay.scene.stop()}renderText(){const e=this.buffer.join("\n");this.text.setText(e),this.text.x=this.game.canvas.width-this.text.getBounds().width-10}};var C=new Phaser.Class({Extends:Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline,initialize:function(e){Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline.call(this,{game:e,renderer:e.renderer,fragShader:["precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main(void) {","  vec4 color = texture2D(uMainSampler, outTexCoord);","  float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));","  gl_FragColor = vec4(vec3(gray), 1.0);","}"].join("\n")})}});var E=new Phaser.Class({Extends:Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline,initialize:function(e){Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline.call(this,{game:e,renderer:e.renderer,fragShader:["precision mediump float;","uniform vec2 resolution;","uniform float tx;","uniform float ty;","uniform float r;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","vec3 makeCircle(vec2 st,vec2 center, vec3 col){","  float d = distance(st,center);","  float pct = smoothstep(r,r+0.1,d);","  return vec3(1.0-pct)*col;","}","void main(void) {","  vec2 st = vec2(gl_FragCoord.x/resolution.x,gl_FragCoord.y/resolution.y);","  vec4 color = texture2D(uMainSampler, outTexCoord);","  gl_FragColor = color*vec4(makeCircle(st,vec2(tx,ty),vec3(1.0)),1.0);","}"].join("\n")})}});var j=class{constructor(e){this.game=e,this.setupFilter("PhaserfrootCameraGrayscale",C),this.setupFilter("PhaserfrootCameraSpotlight",E)}clearCameraFilter(){this.game.levelManager.getCurrent().cameras.main.clearRenderToTexture()}setupFilter(e,t){this.game.renderer.addPipeline(e,new t(this.game))}},S=n(10);class P{constructor(e){this.resources=new Map,e.resources.forEach(e=>{this.resources.set(e.id,e)})}getByIds(e){return e.map(e=>this.resources.get(e))}getResourcesByType(e){const t=[];return this.resources.forEach(n=>{n.type===e&&t.push(n)}),t}getDependencies(e,t){if(t.set(e.id,e),!e.dependencies)return;this.getByIds(e.dependencies.map(e=>e.externalId)).forEach(n=>{n||console.log("#DEBUG","missing on",e,n),t.has(n)||this.getDependencies(n,t)})}getExternalResource(e,t){const n=e.dependencies;if(!n)return console.error("Cannot fetch from non-dependency:",e);const s=n.find(e=>e.internalId===t);return s?this.resources.get(s.externalId):void 0}}var k={doCreate:function(e,t,n){const s=new P(e);t.game.resourceStore=s;const i=s.getResourcesByType(p.Game)[0];if(!i)return void t.game.reportError("Game load error.\n\nThe game file was loaded, but did not include a game description.\n\nPlease contact Gamefroot directly and let us know about this problem!");document.title=i.name,i.levels.map(e=>s.getExternalResource(i,e)).forEach((e,t)=>{if(!e||e.type!==p.Level)return console.error("Level",t,"invalid:",e);b.add(e,t+1)});const r=new Map;s.getDependencies(i,r);const o=[],a=[];r.forEach(e=>{e.type===p.FontFace&&a.push(e)});const c=document.createElement("style");document.head.appendChild(c);const h=c.sheet;a.forEach(e=>{const t=e.fontFiles.map(t=>s.getExternalResource(e,t)).filter(t=>!!t||(console.error("Could not find fontFile resource",internalId,"on",e),!1)),n=`@font-face {\n        font-family: ${e.fontFamily};\n        src: ${t.filter(e=>e).map(e=>`url("${e.uri}") format("${e.format}")`).join(",\n  ")};\n      }`;h.insertRule(n,h.cssRules.length);const i=document.createElement("div");i.style=`font-family: ${e.fontFamily}; position: absolute; top: 0px; z-index: -1;`,i.innerText=`pretouch ${e.fontFamily}`,document.body.appendChild(i),o.push(i)}),r.forEach(e=>{e.type!==p.ImageFile?e.type!==p.AudioFile?e.type!==p.Script||S.a.registerScript(e):t.load.audio(e.id,e.uri):t.load.image(e.id,e.uri)}),t.load.on("progress",e=>{n.updateProgress(t,e,1,0)});const l=[];t.load.on("loaderror",e=>{l.push(e)}),n.loadAndRun(t).then(()=>{if(l.length)return new Promise((e,n)=>{l.forEach(e=>{const n=e.src.replace("https://v3-files.gamefroot.com","https://storage.googleapis.com/files.gamefroot.com").replace("https://files.gamefroot.com","https://storage.googleapis.com/users.gamefroot.com");switch(e.type){case"image":t.load.image(e.key,n);break;case"audio":t.load.audio(e.key,n)}}),t.load.start(),t.load.once("complete",()=>{e()}),t.load.once("error",()=>{t.game.reportError("Couldn't load asset "+file.src),n()})})}).then(async()=>{s.getResourcesByType(p.TileLayer).forEach(e=>this.generateTileset(e,t)),t.data.set("loadCompleted",!0),t.data.get("cameraFadedIn")&&n.finishIndicators(t)}).catch(e=>{console.error("Loader failed",e)})},generateTileset(e,t){const n=e.id+"-tile-spritesheet",s=Math.ceil(Math.sqrt(e.brushes.length)),i=e.tileSize.x+2,r=e.tileSize.y+2,o=t.textures.createCanvas(n,s*i,s*r),a=[[0,0],[0,2],[2,0],[2,2]],c=[[0,1],[1,0],[2,1],[1,2]],h=[1,1],l=t.game.resourceStore;e.brushes.forEach((n,u)=>{let p="number"==typeof n?l.getExternalResource(e,n):n?((e,t)=>l.getExternalResource(e,e.tiles[t]))(l.getExternalResource(e,n.id),n.index):void 0;if(!p)return;const d=l.getExternalResource(p,p.imageId);if(!d)return;const f=t.textures.getFrame(d.id).source.image,g=u%s,m=Math.floor(u/s),y=g*i,v=m*r,_=(t,n)=>{o.context.clearRect(t,n,e.tileSize.x,e.tileSize.y),o.context.drawImage(f,t,n,e.tileSize.x,e.tileSize.y)};a.forEach(e=>{_(y+e[0],v+e[1])}),c.forEach(e=>{_(y+e[0],v+e[1])}),_(y+h[0],v+h[1])}),o.update()}};var T={getPreload:function(e,t){return function(){this.load.crossOrigin="anonymous","string"==typeof e?this.load.json("game",e):this.game.cache.json.add("game",e),t||(t={}),"string"!=typeof t.image&&(t.image="assets/gamefrootAtlas.png"),"string"!=typeof t.json&&(t.json="assets/gamefrootAtlas.phaser.json"),this.load.atlas("gamefroot-splash-screen",t.image,t.json),this.game.filters=new j(this.game)}},getCreate:function(){const e=this;return function(){e.startIndicators(this);const t=this.cache.json.get("game");let n=null;t&&t.formatVersion&&(n=t.formatVersion),"string"==typeof n&&n.match(/^gamefroot-4\./)?k.doCreate(t,this,e):this.game.reportError("Gamefroot Version 4 is rolling out! Get ready for a powerful new experience.\n\nYour project needs to be a Gamefroot Version 4 file in order to play. Please save your work and reload Gamefroot to get the newest version. It will be available in the next few minutes. Thank you for your patience.")}},loadAndRun:function(e){return new Promise((t,n)=>{e.load.list.size>0?(e.load.once("complete",t),e.load.once("error",n),e.load.start()):t()})},startIndicators:function(e){e.add.image(e.game.config.width/2,e.game.config.height/2,"gamefroot-splash-screen","gamefroot-logo");const t=e.add.image(0,e.game.config.height,"gamefroot-splash-screen","loading-bar");t.setOrigin(0,1),t.scaleX=0,t.scaleFactor=e.game.config.width/t.width,e.data.set("loadingBar",t),e.data.set("cameraFadedIn",!1),e.data.set("loadCompleted",!1),e.cameras.main.fadeFrom(500,0,0,0,!1,(t,n)=>{n>=1&&(game.scale.refresh(),setTimeout(()=>{e.data.set("cameraFadedIn",!0),e.data.get("loadCompleted")&&this.finishIndicators(e)},1e3))})},finishIndicators:function(e){e.cameras.main.fadeOut(500,0,0,0,(e,t)=>{t>=1&&(game.scale.refresh(),b.switchTo(1))})},updateProgress:function(e,t,n,s){const i=e.data.get("loadingBar");i.scaleX=(t*n+s)*i.scaleFactor}};var I=new Phaser.Class({Extends:Phaser.Scene,initialize:function(){Phaser.Scene.call(this,{key:"terminator",active:!1,visible:!1})},create:function(){this.game.levelManager.getCurrent().scene.stop(),this.cameras.main.setBackgroundColor({r:16,g:32,b:16,a:255});let e=this.game.userErrorMessage||"An unexpected error occurred. If we'd expected this, it wouldn't be unexpected.";"function"==typeof window.reportError&&window.reportError(e),this.text=this.add.text(10,20,""),this.text.setColor("#aaffaa"),this.text.setWordWrapWidth(this.game.canvas.width-20);const t=()=>{if(e.length){const n=e.slice(0,2);this.text.setText(this.text.text+n),e=e.slice(2),setTimeout(t,1)}};t()}});const A={boot:function(e){const t={type:Phaser.AUTO,scene:{preload:T.getPreload(e.data,e.splash),create:T.getCreate()},input:{activePointers:10},physics:{default:"arcade",arcade:{debug:!!e.debug,overlapBias:16,tileBias:48}},dom:{createContainer:!0},fps:{min:15,deltaHistory:32,panicMax:8},render:{clearBeforeRender:!1,powerPreference:"high-performance"}};delete e.data,delete e.splash,delete e.debug;for(let n in e)t[n]=e[n];return this.game=new Phaser.Game(t),this.game.debug=!!e.debug,this.game.GLOBAL_VARIABLES={},this.levelManager=b,this.levelManager.game=this.game,this.game.levelManager=this.levelManager,this.game.log=new w(this.game),e.debug&&(this.game.log.debug=!0),this.game.setDebug=(e=>{this.game.debug=e;const t=this.levelManager.getCurrent();t&&t.setDebug&&t.setDebug(e),e?this.game.log.addDebug():this.game.log.removeDebug()}),this.game.terminator=new I,this.game.scene.add("terminator",this.game.terminator,!1),this.game.reportError=((e,t,n)=>{this.game.userErrorMessage||(this.game.userErrorMessage=(n||"ERROR")+": "+(t||e),this.game.terminator.scene.start())}),this.game.broadcast={MESSAGE:"MESSAGE",emitter:new Phaser.Events.EventEmitter,ingest:(e,t)=>{const n=this.levelManager.getCurrent();n&&n.messageChildren&&n.messageChildren(e,t)},messageInstance:(e,t,n)=>{const s=this.levelManager.getCurrent();s&&s.messageInstance&&s.messageInstance(e,t,n)}},this.fixKeyStick(),this.game},tags:{UI:"_ui"},_uniqueIdDb:{},_uniqueIdCount:1,fixKeyStick:function(){const e=Phaser.Input.Keyboard.Key.prototype;e.__reset||(e.__reset=e.reset,e.reset=function(){this.isDown&&this.onUp(new KeyboardEvent("onup",{code:this.keyCode})),this.__reset()})},getUniqueId:function(e){if(!e||"null"===e||"undefined"===e){for(e=this._uniqueIdCount;this._uniqueIdDb[""+e];)e++;this._uniqueIdCount=e+1}return e=""+e,this._uniqueIdDb[e]?this.getUniqueId():(this._uniqueIdDb[e]=!0,e)},Component:s,ComponentManager:i,GameObjectTools:a,PluginManager:S.a};window.Phaserfroot=A}]);
//# sourceMappingURL=phaserfroot.js.map